local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

local nameTags = {}
local maxVisibleDistance = 10  -- Distância máxima para mostrar os nomes

-- Função para criar a BillboardGui
local function createNameTag(object)
    local billboardGui = Instance.new("BillboardGui")
    billboardGui.Size = UDim2.new(0, 100, 0, 50)
    billboardGui.Adornee = object
    billboardGui.AlwaysOnTop = true

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.Text = object.Name
    textLabel.BackgroundTransparency = 1
    textLabel.TextColor3 = Color3.new(1, 1, 1)
    textLabel.Parent = billboardGui

    billboardGui.Parent = object
    return billboardGui
end

-- Atualiza a visibilidade dos nomes e objetos
local function updateNameTags()
    while true do
        wait(1)  -- Tempo de espera entre verificações
        local playerPosition = humanoidRootPart.Position

        for _, object in ipairs(workspace:GetDescendants()) do
            if object:IsA("Part") then
                -- Define a transparência para 50%
                object.Transparency = 0.5  

                local distance = (playerPosition - object.Position).magnitude

                if distance < maxVisibleDistance then
                    if not nameTags[object] then
                        nameTags[object] = createNameTag(object)
                    end
                    nameTags[object].Enabled = true  -- Mostra o nome
                else
                    if nameTags[object] then
                        nameTags[object].Enabled = false  -- Oculta o nome
                    end
                end
            end
        end
    end
end

updateNameTags()
