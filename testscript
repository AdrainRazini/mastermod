local player = game.Players.LocalPlayer
local userInputService = game:GetService("UserInputService")

-- Cria√ß√£o da interface gr√°fica
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")  -- Adiciona o ScreenGui ao PlayerGui
screenGui.Enabled = true  -- Garantir que o ScreenGui esteja vis√≠vel

-- Cria√ß√£o do menu
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0, 300, 0, 400)  -- Tamanho do menu
menuFrame.Position = UDim2.new(0.5, -150, 0.5, -200)  -- Posi√ß√£o do menu no centro da tela
menuFrame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)  -- Cor de fundo
menuFrame.Parent = screenGui

-- T√≠tulo do menu
local titleFrame = Instance.new("Frame")
titleFrame.Size = UDim2.new(1, 0, 0, 50)
titleFrame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
titleFrame.Parent = menuFrame

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(0.9, 0, 1, 0)
titleLabel.Text = "MASTERMOD"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextSize = 24
titleLabel.BackgroundTransparency = 1  -- Sem fundo
titleLabel.Parent = titleFrame

-- Adiciona a imagem que ser√° exibida ao minimizar
local minimizedImage = Instance.new("ImageLabel")
minimizedImage.Size = UDim2.new(0, 50, 0, 50)  -- Tamanho da imagem quando minimizado
minimizedImage.Position = UDim2.new(0.5, -25, 0.5, -25)  -- Posi√ß√£o centralizada
minimizedImage.BackgroundTransparency = 1
minimizedImage.Image = "rbxassetid://125503842985497"  -- ID da imagem
minimizedImage.Visible = false  -- Inicialmente invis√≠vel
minimizedImage.Parent = menuFrame

-- Criar um ScrollingFrame para os bot√µes
local scrollingFrame = Instance.new("ScrollingFrame")
scrollingFrame.Size = UDim2.new(1, 0, 1, -60)  -- Ajusta para abaixo do t√≠tulo
scrollingFrame.Position = UDim2.new(0, 0, 0, 50)
scrollingFrame.BackgroundColor3 = Color3.new(0.15, 0.15, 0.15)
scrollingFrame.ScrollBarThickness = 10
scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)  -- Inicialize o CanvasSize com zero
scrollingFrame.Parent = menuFrame

local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Padding = UDim.new(0, 10)
uiListLayout.Parent = scrollingFrame

local dragging, dragStart, startPos

local function updatePosition(input)
    local delta = input.Position - dragStart
    menuFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

menuFrame.InputBegan:Connect(function(input)
    if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
        dragging = true
        dragStart = input.Position
        startPos = menuFrame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

userInputService.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        updatePosition(input)
    end
end)

-- Fun√ß√£o para criar bot√µes no menu
local function createButton(name, activateCallback)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -20, 0, 50)
    button.Text = name
    button.TextColor3 = Color3.new(1, 1, 1)
    button.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
    button.BorderSizePixel = 0
    button.Font = Enum.Font.SourceSans
    button.TextSize = 20
    button.Parent = scrollingFrame

    button.MouseButton1Click:Connect(function()
        activateCallback()
        button.BackgroundColor3 = Color3.new(0.5, 1, 0.5)
        wait(0.5)
        button.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
    end)

    -- Atualiza o CanvasSize para garantir rolagem
    scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, scrollingFrame.UIListLayout.AbsoluteContentSize.Y)
end

-- Criando alguns bot√µes de exemplo
createButton("INVENT√ÅRIO", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/inventario.lua"))()
end)

createButton("DELETAR", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Deletar"))()
end)

createButton("AUTO FARME MOEDAS", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Moedasfarme"))()
end)

createButton("Lock Camera", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Lockcamera"))()
end)

createButton("Lock Air", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Parar"))()
end)

createButton("Coordenadas", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Local"))()
end)

createButton("Hitboxtool", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Hitboxtool"))()
end)

createButton("Hitboxtoolv2", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Hitbooxv2"))()
end)

createButton("Block air tool", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Blockar"))()
end)

createButton("Dash", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/flytoov2"))()
end)

createButton("Fly tool", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/flytool.lua"))()
end)

createButton("Jump tool", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/jumptool.lua"))()
end)

createButton("Aimbot all", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Aimbotall"))()
end)

createButton("Aimbot team", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/Aimbotteam"))()
end)

createButton("Speed Boost tool", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/speedtool.lua"))()
end)

createButton("Teleport tool", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/teleporttool.lua"))()
end)

createButton("Tp Players", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/teleportplayers.lua"))()
end)

createButton("Noclip", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/noclip"))()
end)

-- L√≥gica para minimizar/restaurar o menu com a imagem como quadrado
minimizedImage.MouseButton1Click:Connect(function()
    if menuFrame.Size.X.Offset > 60 then
        menuFrame.Size = UDim2.new(0, 60, 0, 60)  -- Minimiza o menu para um quadrado
        scrollingFrame.Visible = false  -- Oculta a lista de bot√µes
        minimizedImage.Visible = true  -- Exibe a imagem ao minimizar
        titleLabel.Visible = false  -- Oculta o t√≠tulo
    else
        menuFrame.Size = UDim2.new(0, 300, 0, 400)  -- Restaura o menu
        scrollingFrame.Visible = true  -- Mostra a lista de bot√µes
        minimizedImage.Visible = false  -- Oculta a imagem ao restaurar
        titleLabel.Visible = true  -- Mostra o t√≠tulo novamente
 minimizeButton.Text = "üü©" -- Muda o √≠cone
    end
end)
